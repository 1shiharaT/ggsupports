!function(t){"use strict";t.fn.multiAccordion=function(){t(this).addClass("ui-accordion ui-accordion-icons ui-widget ui-helper-reset").find("h3").addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-top ui-corner-bottom").hover(function(){t(this).toggleClass("ui-state-hover")}).prepend('<span class="ui-icon ui-icon-triangle-1-e"></span>').click(function(){return t(this).toggleClass("ui-accordion-header-active ui-state-active ui-state-default ui-corner-bottom").find("> .ui-icon").toggleClass("ui-icon-triangle-1-e ui-icon-triangle-1-s").end().next().toggleClass("ui-accordion-content-active").slideToggle(100),!1}).next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").css("display","block").hide().end().trigger("click")}}(jQuery),function(t){"use strict";function e(e,n){var i=t(".wpa-message-"+e);n&&i.html(n);var o="message-aleady";i.fadeIn(),clearTimeout(a),i.hasClass(o)||(a=setTimeout(function(){i.fadeOut("500")},800))}function n(){t(o).removeAttr("disabled")}function i(){var e=location.hash;t("#wpa_tabs").tabs("enable",e).addClass("ui-tabs-vertical ui-helper-clearfix")}var a,o="#wpa-submit";t(document).change("#wpa_settings_form *",function(){n()});var r=!0;t(document).on("click",o,function(n){if(n.preventDefault(),!1===r)return!1;r=!1;var i=t(this);t("#wpa_tabs ul").find(".spinner").show(),t.ajax({type:"post",url:ajaxurl,data:{action:wpaSETTINGS.action,_wp_nonce:wpaSETTINGS._wp_nonce,form:t("#wpa_settings_form").serializeArray()},success:function(n){1==n?(t("#wpa_tabs ul").find(".spinner").hide(),e("success"),i.attr("disabled","disabled")):(t("#wpa_tabs ul").find(".spinner").hide(),e("faild")),r=!0}})}),t(document).on("click",".wpa-browse",function(e){e.preventDefault();var i=t(this),a=null;return a?(a.open(),!1):(a=wp.media.frames.file_frame=wp.media({title:i.data("uploader_title"),button:{text:i.data("uploader_button_text")},multiple:!1}),a.on("select",function(){var t=a.state().get("selection").first().toJSON();n(),i.prev(".wpa-url").val(t.url)}),void a.open())}),t(function(){window.addEventListener("hashchange",i,!1),t(".acoordion").multiAccordion({animate:100,autoHeight:!1,heightStyle:"content"}),t("#wpa_tabs").tabs().addClass("ui-tabs-vertical ui-helper-clearfix"),t("#wpa_tabs ul li a").on("click",function(){location.hash=t(this).attr("href"),window.scrollTo(0,0)}),t(".form-group-radiobox").buttonset(),t("#wpa-submit").attr("disabled","disabled")})}(jQuery),function(t){"use strict";t(function(){var e=t("#wpadashboard");t("#dashboard-widgets-wrap").prepend(e),t("#wpa_dashboard_widget").remove()})}(jQuery),function(t){"use strict";var e={insertTarget:"#wpa_admin_menus_list",saveHiddenInput:"#admin_menu_hidden",checkedMenus:"#wpa_admin_menus .adminmenu_hidden_check",menuListTemplateID:"#wpa_admin_menus_template",adminMenu:"#adminmenu > li",update:function(){var n=(t(e.checkedMenus),t(".menu-list-item-text_input")),i="",a=0;t.each(n,function(){{var e=t(this).data("menu-id"),n=t(this).val().replace(/\s+/g,"+"),o=t(this).prev().prev().attr("checked")?0:1;t(this).closest(".menu-list-item").data("order")}n&&(0===a?(i+=a+"id="+e,i+="&"+a+"text="+n,i+="&"+a+"disp="+o,i+="&"+a+"order="+a):(i+="&"+a+"id="+e,i+="&"+a+"text="+n,i+="&"+a+"disp="+o,i+="&"+a+"order="+a),a++)}),t(e.saveHiddenInput).val(i)},deparam:function(e){e=e.substring(e.indexOf("?")+1).split("&");var n,i,a,o={},r=decodeURIComponent;for(a=0;a<e.length;a++)o[a]={};for(i=e.length;i>0;)if(n=e[--i].split("="),n[0]&&"undefined"!==n[0]){var u=n[0];if(!u.match(/\d/g))return o;var s=u.match(/\d/g).join("").trim(),d=r(n[0].match(/\D/g).join(""));o[parseInt(s)][d]=r(n[1].replace(/\+/g," "))}return t.each(o,function(t){"undefined"==typeof this.id&&delete o[t]}),o},getTarget:function(){return t(e.insertTarget)},getOriginalMenu:function(){return t(adminMenu)},getOriginalMenuArray:function(){var n=e.getOriginalMenu(),i={};return"undefined"==typeof n?!1:(t.each(n,function(e,n){t(this).find(".wp-menu-name").find(".pending-count").remove(),t(this).find(".wp-menu-name").find(".plugin-count").remove();var a=t(this).find(".wp-menu-name").text(),o=t(this).attr("id");i[e]={title:a,id:o}}),i)},setTemplate:function(){e.template=_.template(t(e.menuListTemplateID).html())},getMenus:function(){return{menus:e.getOriginalMenuArray()}},formatMenu:function(t){},getData:function(t){var n=e.deparam(t);return n=_.sortBy(n,function(t){return parseInt(t.order)}),{menus:n}},init:function(n){var i=e;if(t(e.menuListTemplateID).length){i.setTemplate();var a=e.defaults(),o=n.menus||a;e.enhanced(i.getData(o));var r=i.compiled(i.getData(o));i.getTarget().html(r),e.update(),e.event()}else{var a=e.defaults(),o=n.menus||a;e.enhanced(i.getData(o))}},compiled:function(t){return e.template(t)},enhanced:function(e){var n=_.clone(t("#adminmenu"));_.each(e.menus,function(t,e){var i=n.find("#"+t.id);i.find(".wp-menu-name").text(t.text),i.attr("data-order",t.order)}),n.html(_.sortBy(n.children(),function(e){return parseInt(t(e).data("order"))}))},defaults:function(){var n="",i=0,a=_.clone(t(e.adminMenu));return a.each(function(){var e=t(this).attr("id"),a=t(this).find(".wp-menu-name").text().replace(/(^\s+)|(\s+$)/g,"");a&&(0===i?(n+=i+"id="+e,n+="&"+i+"title="+a,n+="&"+i+"disp=1",n+="&"+i+"order="+i):(n+="&"+i+"id="+e,n+="&"+i+"title="+a,n+="&"+i+"disp=0",n+="&"+i+"order="+i)),i++}),n},event:function(){t(document).on("click","#wpa_admin_menus input",function(){e.update()}),t(document).on("click",'#wpa_admin_menus input[type="checkbox"]',function(){var e=t(this).next().next().data("menu-id"),n=t(this).attr("checked");"checked"===n?t("#"+e).fadeOut():t("#"+e).fadeIn()}),t(document).on("click",".menu-list-item-text",function(e){var n=t(this).closest(".menu-list-item"),i=t(this).next(".menu-list-item-text_input");n.hasClass("on")?t(this).next(".menu-list-item-text_input").attr("class")!==t(e.target).attr("class")&&(n.removeClass("on"),t(this).text(i.val()),t(this).show(),i.hide()):(n.addClass("on"),t(this).hide(),i.show(),i.next().show())}),t(document).on("click",".menu-list-item-text-save",function(n){n.preventDefault();var i=t(this).prev(".menu-list-item-text_input").val();t(this).prev().prev().fadeOut().text(i).fadeIn();var a=t(this).prev().data("menu-id");t("#"+a).find(".wp-menu-name").fadeOut().text(i).fadeIn(),t(this).hide(),t(this).prev().hide(),t(this).prev().prev().show(),e.update()})}};t(function(){var n=wpa_ADMIN_MENU||{};if(e.init(n),t("body").hasClass("toplevel_page_wpa_options_page")){t("#wpa_admin_menus").sortable({placeholder:"ui-state-highlight",update:function(n,i){t(this).find(".menu-list-item").each(function(n,i){t(i).attr("data-order",n),setTimeout(function(){e.update()},500)})}})}})}(jQuery),function(t){function e(e){return e?(e=t(".post-count-"+e),void e.text("0")):!1}var n,i=function(e,i){var a=t(".wpa-message-"+e);i&&a.html(i);var o="message-aleady";a.fadeIn(),clearTimeout(n),a.hasClass(o)||(n=setTimeout(function(){a.fadeOut("500")},800))},a=!0;t(document).on("click","#optimize_submit",function(n){if(n.preventDefault(),!1===a)return!1;var o=(t("#wpa_optimize"),{revision:t('input[name="optimize_revision"]:checked').val(),auto_draft:t('input[name="optimize_auto_draft"]:checked').val(),trash:t('input[name="optimize_trash"]:checked').val()});a=!1;var r=t("#optimize_nonce").val();t(".run_optimize").find(".spinner").show(),t.ajax({type:"post",url:ajaxurl,data:{action:"run_optimize",_wp_optimize_nonce:r,selected_action:o},success:function(n){if(t(".run_optimize").find(".spinner").hide(),"faild"==n.status)i("faild","<h3>"+n.html+"</h3>");else{var o=document.createElement("div"),r=document.createElement("h3");n.optimize_revision&&(t(o).append(t(r).text(t(r).text()+n.optimize_revision)),e("revision")),n.optimize_auto_draft&&(t(o).append(t(r).text(t(r).text()+n.optimize_auto_draft)),e("auto_draft")),n.optimize_trash&&(t(o).append(t(r).text(t(r).text()+n.optimize_trash)),e("trash")),t(o).length>0&&i("optimize",t(o))}a=!0}})})}(jQuery),function(t){"use strict";var e="#tools_option_import",n="tools_option_import_file",i="#tools_option_import_data";t(document).on("change","#"+n,function(){var e=new FileReader,a=document.getElementById(n).files[0];e.onload=function(){t(i).val(e.result)},e.readAsText(a)}),t(document).on("click",e,function(e){e.preventDefault();var n=t(i).val(),a=/^a:.*;}$/;if(!n.match(a))return alert("有効なファイルではありません。ファイルが正しいか確認してください。"),!1;var o=t("#tools_option_import_nonce").val();t.ajax({type:"post",url:ajaxurl,data:{action:"wpa_option_import",wp_import_nonce:o,import_data:n},success:function(t){return console.log(t),"1"===t?(alert("オプションを更新しました"),location.reload(),!0):void 0}})})}(jQuery);